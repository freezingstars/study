# 计算机网络

### 概念

计算机网络(Computer networking)是一个将众多**分散的**，**自治的**计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现**资源共享**和**信息传递**的系统

计算机网络(简称网络)：由若干节点（node）和连接这些节点的线路（link）组成，节点可以使计算机，集线器，交换机，路由器等

集线器（hub）：可以把多个节点连接起来，组成一个计算机网络。普通民用领域已经很少使用集线器，工作在**物理层**。总线拓扑型以广播方式通信，同一时刻仅两个端口通信，半双工传输

交换机（switch）：可以将多个节点连接起来，组成计算机网络，家庭、公司、学习常用交换机组建内部网络，工作在**数据链路层**，通道相互独立全双工通信

路由器（router）：可以把两个或多个计算机网络互相连接起来，形成规模更大的计算机网络“互连网”，工作在**网络层**

家用路由器和传统路由器有一定区别，家用路由器=路由器+交换机+其他功能

ISP ：Internet Service Provider,即**互联网服务提供商**

互连网（因特网），由各大ISP和国际机构组件的，覆盖全球范围的互连网（internet）

小写字母开头的internet（互连网）是个通用名词，泛指多个计算机网络互连而成的计算机网络，对网络间的协议没有要求。

大写字母开头的（互联网）是个专有名词，指全球范围的众多网络互连而成的特定的互连网，它采用TCP/IP协议族。

### 计网的组成和功能
每个网络内部可能使用：集线器、交换机、路由器、调制解调器、无线基站、网线、光纤等各种设备或线路。

​	 - 主机（端系统、end system）电脑、手机、物联网设备

硬件  - 通信设备 集线器、交换机、路由器

​	 - 通信链路 网线、光纤、同轴电缆

软件  - 方便用户使用，实现资源共享。如：Email客户端、聊天软件、网盘软件

协议  - 规定计算机网络中的通信规则 

​	 - 由硬件、软件共同实现  网络适配器+软件 实现网络通信协议

硬件内部安装网络适配器（网卡），网卡再配合软件协议实现网络通信协议。网卡负责交换主机和网络的数据

无线网络适配器通常集成在主板上

从工作方式看，计算机网络主要分为**边缘部分**与**核心部分**.核心部分实现网络连通性与资源交换服务，边缘部分则是各种用户设备，例如服务器与主机。交换服务的核心是路由器

从逻辑功能看，主要分为**资源子网**与**通信子网**
资源子网：计算机网络中运行应用程序，向用户提供可共享的硬件、软件和信息资源的部分。主要由连接到互联网上的主机组成
通信子网：负责信息传输的部分，即所有互联的通信设备与介质的总称，主要由通信链路+通信设备+协议构成。*主机内部实现信息传输的网络适配器、底层协议属于通信子网的范畴*

功能上主要为：**数据通信**，资源共享，分布式处理，提高可靠性，负载均衡，其他（生活，娱乐）

### 交换
交换技术：**电路 报文 分组**，分别对应电话网络，电报网络，现代计算机网络
电路交换(Circuit Switching)：通过物理线路的连接，**动态分配**传输线路资源，**专用**物理链路，**始终**占用端到端线路资源，数据直送，传输效率**高**适合*低频次连接，大量传输数据*。
缺点：
- 建立/释放连接需要**额外的时间开销**。
- 线路被通信双方**独占**，**利用率低**。
- 线路分配的**灵活性差**。交换节点**不支持“差错控制”**（无法发现传输过程中发生的数据错误）

报文交换：
报文存储在交换设备内存中，交换设备内建路径表，优先选择通路。报文附带发送方和接收方信息
优点：
- 通信前**无需建立连接**，仅需要将文件上传至报文网络
- 数据以“报文”为单位在被交换节点间“**存储转发**”，通信线路可以**灵活分配**
- 在通信时间内，两个用户**无需独占**一整条物理线路。相比于电路交换，**线路利用率高**
- 交换节点**支持“差错控制”**（通过校验技术）

缺点：
- 报文**不定长**，不方便存储转发管理
- 长报文的存储转发**时间开销大、缓存开销大**
- 长报文容易出错，重传**代价高**

分组交换：
将不定长的报文转换为定长的分组，在每一段分组中加入相同的header控制信息（源、地址、目的地址、分组号等）。
报文（Message），分组、包（Packet），首部、头信息（Header）.
优点：
- 通信前无需建立连接
- 以“分组”为单位在被交换节点中“存储转发”，通信线路可以灵活分配
- 在通信时间中，两个用户无需独占一整条物理线路。相比于电路交换，线路利用率高。
- 交换节点支持“差错控制”（通过校验技术）

改进：
- 分组**定长，方便存储转发管理**
- 分组的存储转发时间开销小、缓存开销小
- 分组不易出错，重传代价低

缺点：
- 相比于报文交换，控制信息占比增加
- 相比于电路交换，依旧存在存储转发时延
- 报文被拆分为多个分组，传输过程中可能出现**失序、丢失等**问题，增加处理的复杂度

#### 虚电路交换技术
**虚拟电路**，所以会先建立连接，然后通信，分组按序从既定的线路发送，通信双方不独占线路，释放连接

### 类型
分布范围分类：广(Wide Area Network) 城(Metropolitan Area Network) 局(Local Area Network) 个(Personal Area Network)
传输技术分类：广播式网络 点对点网络
拓扑结构分类：[总线 环形 星形]常见于局域网 网状
按使用者分类：公用网 专用网
传输介质分类：有线网络 无线网络
城域网和广域网通常采用以太网技术，个域网通常是通过无线技术连接的网络，因此常称为无线个域网。局域网几乎都是采用**以太网**技术，平时所说的基本也都是以太网交换机
广播式网络发送数据分组时，广播范围内所有计算机都会收到该分组，并通过检查分组目的地址决定是否接受该分组，点对点(p2p)网络则精准送达
总线结构数据广播式传播，存在总线占用的问题
集线器时期主要使用令牌环网技术，以太网交换机发明后以太网技术取得统治地位

### 计网性能指标
- 速率、带宽、吞吐量
- 时延、时延带宽积、往返时延
- 信道利用率
**信道**（Channel）：表示向某一方向传送信息的通道（信道!=通信线路），一条通信线路在逻辑上往往对应一条**发送信道**和一条**接收信道**
**速率**（Speed）：指连接到网络上的节点在信道上传输数据的速率，也称**数据率**或**比特率**、**数据传输速率**
速率单位：bit/s，或b/s，或bps（bit per second）;小b比特，大B字节，1B=8b , 1MB/s = 8Mbps
数量前缀：k（千）M（兆）G（吉）T（太），传输速率是10^3为单位递增，大小是1024
带宽（bandwidth）：某信道所能传送的最高数据率,传输时遵循**木桶效应**，速率最低的一方决定了双方传输速度的上限
在《计算机网络》中：带宽（bandwidth）表示信道所能通过的“最高数据率”。在《通信原理》中：带宽表示某信道允许通过的信号频带范围。单位Hz赫兹，可以加上数量前缀k、M、G、T
光纤的带宽约500Mhz，电话线的带宽约3kHz
吞吐量（Throughput）：指单位时间内通过某个网络（或信道、接口）的实际数据量（**实际的综合数据率**），吞吐量受带宽限制、受复杂的网络负载情况影响
点对点传输：**网线吞吐量=信道吞吐量总和=网卡吞吐量**

#### 时延
时延（Delay）：指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间，有时也称为延迟或迟延
总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延
发送时延又称作传输时延，指节点将数据推向信道所花的时间，发送时延=数据长度(bit)/发送速率(bit/s)
传播时延指电磁波在信道中传播一定距离所花的时间，传播时延=信道长度(m)/传播速度(m/s)
处理时延和排队时延指从数据**排队进入**路由器**被路由器处理**所花的时间（分析首部、查找存储转发表）到**排队发出**所花的时间
**时延带宽积**=传播时延\*带宽 = (bit/s)
含义：一条链路中**从发送端发出但尚未到达接收端**的最大比特数，可以理解为求水管容积